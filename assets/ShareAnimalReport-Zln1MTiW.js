import{_ as I}from"./AppLayout-DF7SUZZt.js";import{y as _,z as S,A as z,B as c,c as p,w as l,C as B,o as u,d as g,R as C,a as r,u as e,E as N,G as h,D as i,V as k,J as w,x as n,L as f,v as m,s as b,a7 as R,F as V,e as L,aa as q}from"./index-wW-_Sv7h.js";const A={key:0,style:{"padding-bottom":"100px"}},D={style:{"font-size":"20px","font-weight":"bold","text-transform":"capitalize"}},E={class:"metadata-end-wrapper",slot:"end"},F={class:"metadata-end-wrapper",slot:"end"},K={__name:"ShareAnimalReport",setup($){const o=_({animal:"",back:"",workers:[]}),x=B(),v=z();S(()=>{let d=v.path.split("/");c.from("animal").select("*,farm(name, location,tel,type,size,id)").eq("id",d[2]).then(a=>{a.error==null?a.data.forEach(t=>{o.animal=t,o.back="/farm/show/"+t.farm.id,c.from("worker").select("*").eq("farm_id",t.farm.id).then(s=>{s.error==null?o.workers=s.data:console.log(s.error)}).catch(s=>{console.log(s)})}):console.log(a.error)}).catch(a=>{console.log(a)})}),_({report:"",description:""}),_({error:null});const y=async d=>{const a=o.animal.id,t=await c.from("animal_report").select("*").eq("animal_id",a),s={...t.data};t.error==null?(await c.from("message").insert([{animal_id:a,worker_id:d.id,message:s}]).select(),x.push("/animal/"+a)):console.log(t.error)};return(d,a)=>(u(),p(I,{title:"Share Report",back:o.back},{default:l(()=>[o.animal!=""?(u(),g("div",A,[r(e(N),null,{default:l(()=>[r(e(h),{lines:"none",color:"light"},{default:l(()=>[r(e(k),{slot:"start"},{default:l(()=>a[0]||(a[0]=[i("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)])),_:1,__:[0]}),r(e(w),null,{default:l(()=>[i("strong",D,n(o.animal.name),1),a[1]||(a[1]=i("br",null,null,-1)),r(e(f),{color:"medium",class:"ion-text-wrap"},{default:l(()=>[m(n(o.animal.gender)+" . "+n(o.animal.color)+" . "+n(o.animal.weight)+" Kgs ",1)]),_:1})]),_:1,__:[1]}),i("div",E,[r(e(f),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[r(e(b),{icon:e(R)},null,8,["icon"]),m(" "+n(o.animal.tag),1)]),_:1})])]),_:1}),(u(!0),g(V,null,L(o.workers,(t,s)=>(u(),p(e(h),{button:!0,detail:"false",key:s,lines:"none",style:{border:"solid thin #e5e8e8","margin-top":"5px",margin:"5px"},onClick:j=>y(t)},{default:l(()=>[r(e(k),{slot:"start"},{default:l(()=>a[2]||(a[2]=[i("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)])),_:1,__:[2]}),r(e(w),null,{default:l(()=>[i("strong",null,[m(n(t.firstname)+" "+n(t.lastname),1),a[3]||(a[3]=i("br",null,null,-1))]),r(e(f),{color:"medium",class:"ion-text-wrap"},{default:l(()=>[m(n(t.role)+" . 0"+n(t.tel),1)]),_:2},1024)]),_:2},1024),i("div",F,[r(e(b),{color:"medium",icon:e(q)},null,8,["icon"]),r(e(f),{color:"medium"},{default:l(()=>a[4]||(a[4]=[m(" Share")])),_:1,__:[4]})])]),_:2},1032,["onClick"]))),128))]),_:1})])):C("",!0)]),_:1},8,["back"]))}};export{K as default};
