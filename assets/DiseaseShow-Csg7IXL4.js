import{y as I,a4 as z,A as K,z as O,B as y,c as C,w as o,C as Q,o as f,d as b,Q as E,a as l,u as e,E as B,G as i,D as d,J as v,x as p,Z as k,v as r,s as w,X as F,a1 as N,F as D,e as L,aj as W,ak as X,a5 as T,K as $,L as M,M as U,a6 as q,S as V,N as A,P as R,R as H,ai as P,V as Z,W as Y}from"./index-DVhh1H_T.js";import{_ as h}from"./AppLayout-BtbxSiKf.js";const ee={key:0},te={style:{}},le={style:{"text-transform":"capitalize"}},oe={style:{"text-transform":"capitalize"}},se={class:"metadata-end-wrapper",slot:"end"},ne={key:0,style:{color:"red",padding:"10px"}},ae={key:0,style:{color:"red",padding:"10px"}},ue={__name:"DiseaseShow",setup(re){const n=I({disease:null,symptom:[],treatment:[]}),g=z(!1),x=z(!1),j=K();Q();const S=j.path.split("/");O(async()=>{const a=await y.from("disease").select("*").eq("id",S[3]);if(a.error==null){a.data.forEach(c=>{n.disease=c});const t=await y.from("symptom").select("*").eq("disease_id",n.disease.id);t.error==null?n.symptom=t.data:console.log(t.error);const s=await y.from("treatment").select("*").eq("disease_id",S[3]);s.error==null?n.treatment=s.data:console.log(s.error)}else console.log(a.error)});const _=I({error:null,error2:null}),u=I({name:"",description:""}),G=async()=>{if(u.name==""||u.description=="")_.error="Fill in all fields";else{const a=await y.from("symptom").insert([{name:u.name,description:u.description,disease_id:n.disease.id}]).select();a.error==null?a.data.forEach(t=>{n.symptom.push(t),g.value=!1}):console.log(a.error)}},m=I({name:"",description:""}),J=async()=>{if(m.name==""||m.description=="")_.error2="Fill in all fields";else{const a=await y.from("treatment").insert([{name:m.name,description:m.description,disease_id:n.disease.id}]).select();a.error==null?a.data.forEach(t=>{n.treatment.push(t),x.value=!1}):console.log(a.error)}};return(a,t)=>(f(),C(h,{title:"Diseases Details",back:"/disease"},{default:o(()=>[n.disease!=null?(f(),b("div",ee,[l(e(B),null,{default:o(()=>[l(e(i),{color:"light",lines:"full"},{default:o(()=>[l(e(v),null,{default:o(()=>[d("strong",te,p(n.disease.name),1),t[8]||(t[8]=d("br",null,null,-1)),l(e(k),{color:"medium",class:"ion-text-wrap"},{default:o(()=>[r(p(n.disease.description),1)]),_:1})]),_:1,__:[8]}),d("div",{class:"metadata-end-wrapper",slot:"end",onClick:t[0]||(t[0]=s=>x.value=!0)},[l(e(w),{color:"medium",icon:e(F)},null,8,["icon"]),l(e(k),{color:"medium"},{default:o(()=>t[9]||(t[9]=[r(" Prescription")])),_:1,__:[9]})])]),_:1}),l(e(N),{color:"light"},{default:o(()=>[l(e(v),null,{default:o(()=>t[10]||(t[10]=[r(" Symptoms ")])),_:1,__:[10]})]),_:1}),(f(!0),b(D,null,L(n.symptom,(s,c)=>(f(),C(e(i),{button:!0,detail:"false",lines:"full",key:c},{default:o(()=>[l(e(w),{icon:e(W),slot:"start"},null,8,["icon"]),l(e(v),null,{default:o(()=>[d("strong",le,p(s.name),1),t[11]||(t[11]=d("br",null,null,-1)),l(e(k),{color:"medium",class:"ion-text-wrap"},{default:o(()=>[r(p(s.description),1)]),_:2},1024)]),_:2,__:[11]},1024)]),_:2},1024))),128)),l(e(N),{color:"light"},{default:o(()=>[l(e(v),null,{default:o(()=>t[12]||(t[12]=[r(" Treatment ")])),_:1,__:[12]})]),_:1}),(f(!0),b(D,null,L(n.treatment,(s,c)=>(f(),C(e(i),{detail:"false",key:c,lines:"full"},{default:o(()=>[l(e(v),null,{default:o(()=>[d("strong",oe,p(s.name),1),t[13]||(t[13]=d("br",null,null,-1)),l(e(k),{color:"medium",class:"ion-text-wrap"},{default:o(()=>[r(p(s.description),1)]),_:2},1024)]),_:2,__:[13]},1024),d("div",se,[l(e(w),{color:"medium",icon:e(X)},null,8,["icon"])])]),_:2},1024))),128))]),_:1}),l(e(T),{"is-open":g.value},{default:o(()=>[l(e($),null,{default:o(()=>[l(e(M),null,{default:o(()=>[l(e(U),null,{default:o(()=>t[14]||(t[14]=[r("Add symptoms")])),_:1,__:[14]}),l(e(q),{slot:"end"},{default:o(()=>[l(e(V),{onClick:t[1]||(t[1]=s=>g.value=!1)},{default:o(()=>t[15]||(t[15]=[r("Close")])),_:1,__:[15]})]),_:1})]),_:1})]),_:1}),l(e(A),{class:"ion-padding"},{default:o(()=>[d("form",{onSubmit:R(G,["prevent"])},[_.error!=null?(f(),b("div",ne,p(_.error),1)):E("",!0),l(e(B),{style:{border:"solid thin #e5e8e8","border-radius":"10px",padding:"10px"}},{default:o(()=>[l(e(i),null,{default:o(()=>[l(e(H),{placeholder:"Enter symptom",modelValue:u.name,"onUpdate:modelValue":t[2]||(t[2]=s=>u.name=s)},null,8,["modelValue"])]),_:1}),l(e(i),null,{default:o(()=>[l(e(P),{placeholder:"Enter symptom description",modelValue:u.description,"onUpdate:modelValue":t[3]||(t[3]=s=>u.description=s)},null,8,["modelValue"])]),_:1}),l(e(i),{lines:"none"},{default:o(()=>[l(e(V),{expand:"block",style:{width:"100%","margin-top":"20px"},class:"ion-button",size:"default",type:"submit"},{default:o(()=>t[16]||(t[16]=[r("Save")])),_:1,__:[16]})]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["is-open"]),l(e(T),{"is-open":x.value},{default:o(()=>[l(e($),null,{default:o(()=>[l(e(M),null,{default:o(()=>[l(e(U),null,{default:o(()=>t[17]||(t[17]=[r("Add treatment")])),_:1,__:[17]}),l(e(q),{slot:"end"},{default:o(()=>[l(e(V),{onClick:t[4]||(t[4]=s=>x.value=!1)},{default:o(()=>t[18]||(t[18]=[r("Close")])),_:1,__:[18]})]),_:1})]),_:1})]),_:1}),l(e(A),{class:"ion-padding"},{default:o(()=>[d("form",{onSubmit:R(J,["prevent"])},[_.error2!=null?(f(),b("div",ae,p(_.error2),1)):E("",!0),l(e(B),{style:{border:"solid thin #e5e8e8","border-radius":"10px",padding:"10px"}},{default:o(()=>[l(e(i),null,{default:o(()=>[l(e(H),{placeholder:"Enter treatment",modelValue:m.name,"onUpdate:modelValue":t[5]||(t[5]=s=>m.name=s)},null,8,["modelValue"])]),_:1}),l(e(i),null,{default:o(()=>[l(e(P),{placeholder:"Enter treatment description",modelValue:m.description,"onUpdate:modelValue":t[6]||(t[6]=s=>m.description=s)},null,8,["modelValue"])]),_:1}),l(e(i),{lines:"none"},{default:o(()=>[l(e(V),{expand:"block",style:{width:"100%","margin-top":"20px"},class:"ion-button",size:"default",type:"submit"},{default:o(()=>t[19]||(t[19]=[r("Save")])),_:1,__:[19]})]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["is-open"])])):E("",!0),l(e(Z),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:o(()=>[l(e(Y),{color:"dark",onClick:t[7]||(t[7]=s=>g.value=!0)},{default:o(()=>[l(e(w),{icon:e(F)},null,8,["icon"])]),_:1})]),_:1})]),_:1}))}};export{ue as default};
