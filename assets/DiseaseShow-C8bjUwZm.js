import{y as w,a4 as F,A as J,z as Q,B as y,c as b,w as o,C as W,o as m,d as v,R as x,a as l,u as e,E as S,G as p,D as r,J as g,x as f,L as V,s as C,Y as N,v as i,a1 as T,F as D,e as L,aj as X,ak as Y,a5 as $,M,N as U,O as q,a6 as A,T as E,P as R,Q as H,S as O,ai as P,W as K,X as Z}from"./index-wW-_Sv7h.js";import{_ as h}from"./AppLayout-DF7SUZZt.js";const ee={key:0},te={style:{"text-transform":"capitalize"}},le={style:{"padding-top":"10px"}},oe={style:{"text-transform":"capitalize"}},se={style:{"text-transform":"capitalize"}},ne={key:0,style:{color:"red",padding:"10px"}},ae={key:0,style:{color:"red",padding:"10px"}},ue={__name:"DiseaseShow",setup(re){const n=w({disease:null,symptom:[],treatment:[]}),I=F(!1),k=F(!1),B=J();W();const z=B.path.split("/");Q(async()=>{const a=await y.from("disease").select("*").eq("id",z[3]);if(a.error==null){a.data.forEach(c=>{n.disease=c});const t=await y.from("symptom").select("*").eq("disease_id",n.disease.id);t.error==null?(n.symptom=t.data,d.name="",d.description=""):console.log(t.error);const s=await y.from("treatment").select("*").eq("disease_id",z[3]);s.error==null?(n.treatment=s.data,u.name="",u.description=""):console.log(s.error)}else console.log(a.error)});const _=w({error:null,error2:null}),d=w({name:"",description:""}),j=async()=>{if(d.name==""||d.description=="")_.error="Fill in all fields";else{const a=await y.from("symptom").insert([{name:d.name,description:d.description,disease_id:n.disease.id}]).select();a.error==null?a.data.forEach(t=>{n.symptom.push(t),I.value=!1}):console.log(a.error)}},u=w({name:"",description:""}),G=async()=>{if(u.name==""||u.description=="")_.error2="Fill in all fields";else{const a=await y.from("treatment").insert([{name:u.name,description:u.description,disease_id:n.disease.id}]).select();a.error==null?a.data.forEach(t=>{n.treatment.push(t),k.value=!1}):console.log(a.error)}};return(a,t)=>(m(),b(h,{title:"Diseases Details",back:"/disease"},{default:o(()=>[n.disease!=null?(m(),v("div",ee,[l(e(S),null,{default:o(()=>[l(e(p),{color:"light",lines:"none"},{default:o(()=>[l(e(g),null,{default:o(()=>[r("strong",te,f(n.disease.name),1),t[8]||(t[8]=r("br",null,null,-1)),l(e(V),{color:"medium",class:"ion-text-wrap"},{default:o(()=>[r("div",le,f(n.disease.description),1)]),_:1})]),_:1,__:[8]}),r("div",{class:"metadata-end-wrapper",slot:"end",onClick:t[0]||(t[0]=s=>k.value=!0)},[l(e(C),{color:"medium",icon:e(N)},null,8,["icon"]),l(e(V),{color:"medium"},{default:o(()=>t[9]||(t[9]=[i(" Prescription")])),_:1,__:[9]})])]),_:1}),l(e(T),{color:"light"},{default:o(()=>[l(e(g),null,{default:o(()=>t[10]||(t[10]=[i(" Symptoms ")])),_:1,__:[10]})]),_:1}),(m(!0),v(D,null,L(n.symptom,(s,c)=>(m(),b(e(p),{button:!0,detail:"false",lines:"full",key:c},{default:o(()=>[l(e(C),{icon:e(X),slot:"start"},null,8,["icon"]),l(e(g),null,{default:o(()=>[r("strong",oe,f(s.name),1),t[11]||(t[11]=r("br",null,null,-1)),l(e(V),{color:"medium",class:"ion-text-wrap"},{default:o(()=>[i(f(s.description),1)]),_:2},1024)]),_:2,__:[11]},1024)]),_:2},1024))),128)),l(e(T),{color:"light"},{default:o(()=>[l(e(g),null,{default:o(()=>t[12]||(t[12]=[i(" Treatment ")])),_:1,__:[12]})]),_:1}),(m(!0),v(D,null,L(n.treatment,(s,c)=>(m(),b(e(p),{detail:"false",key:c,lines:"full"},{default:o(()=>[l(e(C),{icon:e(Y),slot:"start"},null,8,["icon"]),l(e(g),null,{default:o(()=>[r("strong",se,f(s.name),1),t[13]||(t[13]=r("br",null,null,-1)),l(e(V),{color:"medium",class:"ion-text-wrap"},{default:o(()=>[i(f(s.description),1)]),_:2},1024)]),_:2,__:[13]},1024),t[14]||(t[14]=r("div",{class:"metadata-end-wrapper",slot:"end"},null,-1))]),_:2,__:[14]},1024))),128))]),_:1}),e(B).name=="disease show"?(m(),b(e($),{key:0,"is-open":I.value},{default:o(()=>[l(e(M),null,{default:o(()=>[l(e(U),null,{default:o(()=>[l(e(q),null,{default:o(()=>t[15]||(t[15]=[i("Add symptoms")])),_:1,__:[15]}),l(e(A),{slot:"end"},{default:o(()=>[l(e(E),{onClick:t[1]||(t[1]=s=>I.value=!1)},{default:o(()=>t[16]||(t[16]=[i("Close")])),_:1,__:[16]})]),_:1})]),_:1})]),_:1}),l(e(R),{class:"ion-padding"},{default:o(()=>[r("form",{onSubmit:H(j,["prevent"])},[_.error!=null?(m(),v("div",ne,f(_.error),1)):x("",!0),l(e(S),{style:{border:"solid thin #e5e8e8","border-radius":"10px",padding:"10px"}},{default:o(()=>[l(e(p),null,{default:o(()=>[l(e(O),{placeholder:"Enter symptom",modelValue:d.name,"onUpdate:modelValue":t[2]||(t[2]=s=>d.name=s)},null,8,["modelValue"])]),_:1}),l(e(p),null,{default:o(()=>[l(e(P),{placeholder:"Enter symptom description",modelValue:d.description,"onUpdate:modelValue":t[3]||(t[3]=s=>d.description=s)},null,8,["modelValue"])]),_:1}),l(e(p),{lines:"none"},{default:o(()=>[l(e(E),{expand:"block",style:{width:"100%","margin-top":"20px"},class:"ion-button",size:"default",type:"submit"},{default:o(()=>t[17]||(t[17]=[i("Save")])),_:1,__:[17]})]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["is-open"])):x("",!0),e(B).name=="disease show"?(m(),b(e($),{key:1,"is-open":k.value},{default:o(()=>[l(e(M),null,{default:o(()=>[l(e(U),null,{default:o(()=>[l(e(q),null,{default:o(()=>t[18]||(t[18]=[i("Add treatment")])),_:1,__:[18]}),l(e(A),{slot:"end"},{default:o(()=>[l(e(E),{onClick:t[4]||(t[4]=s=>k.value=!1)},{default:o(()=>t[19]||(t[19]=[i("Close")])),_:1,__:[19]})]),_:1})]),_:1})]),_:1}),l(e(R),{class:"ion-padding"},{default:o(()=>[r("form",{onSubmit:H(G,["prevent"])},[_.error2!=null?(m(),v("div",ae,f(_.error2),1)):x("",!0),l(e(S),{style:{border:"solid thin #e5e8e8","border-radius":"10px",padding:"10px"}},{default:o(()=>[l(e(p),null,{default:o(()=>[l(e(O),{placeholder:"Enter treatment",modelValue:u.name,"onUpdate:modelValue":t[5]||(t[5]=s=>u.name=s)},null,8,["modelValue"])]),_:1}),l(e(p),null,{default:o(()=>[l(e(P),{placeholder:"Enter treatment description",modelValue:u.description,"onUpdate:modelValue":t[6]||(t[6]=s=>u.description=s)},null,8,["modelValue"])]),_:1}),l(e(p),{lines:"none"},{default:o(()=>[l(e(E),{expand:"block",style:{width:"100%","margin-top":"20px"},class:"ion-button",size:"default",type:"submit"},{default:o(()=>t[20]||(t[20]=[i("Save")])),_:1,__:[20]})]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["is-open"])):x("",!0)])):x("",!0),l(e(K),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:o(()=>[l(e(Z),{color:"dark",onClick:t[7]||(t[7]=s=>I.value=!0)},{default:o(()=>[l(e(C),{icon:e(N)},null,8,["icon"])]),_:1})]),_:1})]),_:1}))}};export{ue as default};
