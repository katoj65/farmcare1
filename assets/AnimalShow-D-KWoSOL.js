import{E as z,Q as T,Y as E,P as v,$ as F,a1 as N,c as g,w as l,o as p,d as k,J as y,a,u as t,K as w,L as d,_ as D,D as x,R as u,v as o,x as i,a2 as f,N as b,s as B,a3 as L,Z as C,F as M,e as R,S as $,T as O,U,a4 as q,z as K,A as W,B as G,a5 as J,C as P,a6 as Q,H as X,W as Y,X as S,M as Z}from"./index-DtaJf1ai.js";import{_ as j}from"./AppLayout-DMDT8Qzp.js";const ee={key:0,style:{"padding-bottom":"100px"}},te={style:{"font-size":"18px","font-weight":"bold","text-transform":"capitalize"}},le={key:0,style:{padding:"10px",color:"red"}},re={__name:"AnimalShow",setup(ae){const r=z({animal:"",back:"",report:[]}),c=E();T(()=>{let s=c.path.split("/");v.from("animal").select("*,farm (name, location,tel,type,size,id)").eq("id",s[2]).then(e=>{e.error==null?(e.data.forEach(n=>{r.animal=n,r.back="/farm/show/"+n.farm.id}),v.from("animal_report").select("type,description").eq("animal_id",r.animal.id).limit(3).then(n=>{n.error==null?r.report=n.data:console.log(n.error)}).catch(n=>{console.log(n)})):console.log(e.error)}).catch(e=>{console.log(e)})}),F(s=>{let e=s.split("-");return e[0]+"-"+e[1]+"-"+e[2]});const V=N(!1),I=s=>{V.value=s},m=z({report:"",description:""}),_=z({error:null}),h=s=>{let e="";return s==="animal temperature"?e="Degrees":s==="heartbeat"?e="Hbps":s==="environmental temperature"&&(e="Degrees"),e},A=()=>{let s=c.path.split("/");_.error=null,m.report==""||m.description==""?_.error="Fill in all fields":v.from("animal_report").insert([{animal_id:s[2],type:m.report,description:m.description,status:"active"}]).select().then(e=>{e.error==null?(I(!1),m.description="",m.report="",e.data.forEach(n=>{r.report.push(n)})):console.log(e.error)}).catch(e=>{console.log(e)})};return(s,e)=>(p(),g(j,{title:"Animal details",back:r.back},{default:l(()=>[r.animal!=""?(p(),k("div",ee,[a(t(w),null,{default:l(()=>[a(t(d),{lines:"none",color:"light"},{default:l(()=>[a(t(D),null,{default:l(()=>e[4]||(e[4]=[x("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)])),_:1,__:[4]}),a(t(u),{style:{"font-size":"18px","font-weight":"bold","text-transform":"capitalize","margin-left":"10px"}},{default:l(()=>[o(i(r.animal.name),1)]),_:1}),a(t(f),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[a(t(b),{color:"light"},{default:l(()=>[a(t(B),{"aria-hidden":"true",icon:t(L)},null,8,["icon"])]),_:1})]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[5]||(e[5]=[o("Gender")])),_:1,__:[5]}),a(t(f),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[o(i(r.animal.gender),1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[6]||(e[6]=[o("Tag")])),_:1,__:[6]}),a(t(f),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[o(i(r.animal.tag),1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[7]||(e[7]=[o("Color")])),_:1,__:[7]}),a(t(f),{color:"medium",style:{"font-size":"17px"}},{default:l(()=>[o(i(r.animal.color),1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[8]||(e[8]=[o("Weight")])),_:1,__:[8]}),a(t(f),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[o(i(r.animal.weight)+" Kgs ",1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[9]||(e[9]=[o("Origin")])),_:1,__:[9]}),a(t(f),{color:"medium",style:{"text-transform":"capitalize","font-size":"15px"}},{default:l(()=>[o(i(r.animal.origin),1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[10]||(e[10]=[o("Farm")])),_:1,__:[10]}),a(t(f),{color:"medium",style:{"text-transform":"capitalize","font-size":"15px"}},{default:l(()=>[o(i(r.animal.farm.name),1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[11]||(e[11]=[o("Date added")])),_:1,__:[11]}),a(t(f),{color:"medium",style:{"text-transform":"capitalize","font-size":"10px"}},{default:l(()=>[o(i(r.animal.created_at),1)]),_:1})]),_:1}),a(t(C),{color:"light"},{default:l(()=>[a(t(u),{style:{"font-weight":"bold"}},{default:l(()=>e[12]||(e[12]=[o(" Animal Health Report")])),_:1,__:[12]}),r.report.length>0?(p(),g(t(b),{key:0,color:"dark"},{default:l(()=>e[13]||(e[13]=[x("span",{class:"material-icons"},"share",-1)])),_:1,__:[13]})):y("",!0)]),_:1}),(p(!0),k(M,null,R(r.report,(n,H)=>(p(),g(t(d),{key:H,color:"light",style:{"margin-top":"3px"},lines:"none"},{default:l(()=>[a(t(u),{style:{"text-transform":"capitalize"}},{default:l(()=>[o(i(n.type),1)]),_:2},1024),a(t(f),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[o(i(n.description)+" "+i(h(n.type)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):y("",!0),a(t($),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:l(()=>[a(t(O),{color:"dark",onClick:e[0]||(e[0]=n=>I(!0))},{default:l(()=>[a(t(B),{icon:t(U)},null,8,["icon"])]),_:1})]),_:1}),t(c).name=="animal details"?(p(),g(t(q),{key:1,"is-open":V.value},{default:l(()=>[a(t(K),null,{default:l(()=>[a(t(W),null,{default:l(()=>[a(t(G),null,{default:l(()=>e[14]||(e[14]=[o("Add animal report")])),_:1,__:[14]}),a(t(J),{slot:"end"},{default:l(()=>[a(t(b),{onClick:e[1]||(e[1]=n=>I(!1))},{default:l(()=>e[15]||(e[15]=[o("Close")])),_:1,__:[15]})]),_:1})]),_:1})]),_:1}),a(t(P),null,{default:l(()=>[a(t(w),null,{default:l(()=>[a(t(C),{color:"light"},{default:l(()=>[a(t(u),null,{default:l(()=>[x("h4",te,i(r.animal.name),1)]),_:1}),a(t(Q),{color:"light",style:{border:"solid thin #e5e8e8"}},{default:l(()=>[o(" Tag: "+i(r.animal.tag),1)]),_:1})]),_:1})]),_:1}),x("form",{style:{padding:"15px"},onSubmit:X(A,["prevent"])},[a(t(w),{style:{border:"solid thin #e5e8e8","border-radius":"10px","padding-bottom":"15px"}},{default:l(()=>[_.error!=null?(p(),k("div",le,i(_.error),1)):y("",!0),a(t(d),null,{default:l(()=>[a(t(Y),{label:"Report",placeholder:"Select option",modelValue:m.report,"onUpdate:modelValue":e[2]||(e[2]=n=>m.report=n)},{default:l(()=>[a(t(S),{value:"animal temperature"},{default:l(()=>e[16]||(e[16]=[o("Animal Temperature")])),_:1,__:[16]}),a(t(S),{value:"heartbeat"},{default:l(()=>e[17]||(e[17]=[o("Heartbeat")])),_:1,__:[17]}),a(t(S),{value:"environmental temperature"},{default:l(()=>e[18]||(e[18]=[o("Environmental temperature")])),_:1,__:[18]})]),_:1},8,["modelValue"])]),_:1}),a(t(d),null,{default:l(()=>[a(t(Z),{label:"Measurements",placeholder:"Enter readings",type:"number",modelValue:m.description,"onUpdate:modelValue":e[3]||(e[3]=n=>m.description=n)},null,8,["modelValue"])]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(b),{expand:"block",style:{width:"100%","margin-top":"20px"},class:"ion-button",size:"default",type:"submit"},{default:l(()=>e[19]||(e[19]=[o("Save")])),_:1,__:[19]})]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["is-open"])):y("",!0)]),_:1},8,["back"]))}};export{re as default};
