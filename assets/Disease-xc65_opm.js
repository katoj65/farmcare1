import{y as f,a4 as w,z as C,B as b,c as v,w as a,C as B,o as d,a as s,u as e,E as k,d as x,F as E,e as F,G as i,J as N,D as p,x as m,W as T,X as D,s as M,Y as S,a5 as $,M as z,N as L,O as R,v as c,a6 as U,T as y,P as h,Q as A,R as G,S as H,ai as J}from"./index-DHJmnvqt.js";import{_ as O}from"./AppLayout-DASog9WL.js";const P={key:0,style:{color:"red",padding:"10px"}},j={__name:"Disease",setup(Q){const _=f({disease:[]}),r=w(!1),I=B();C(async()=>{const n=await b.from("disease").select("*");n.error==null?_.disease=n.data:console.log(n.error)});const u=f({error:null}),t=f({name:"",description:""}),V=async()=>{if(t.name==""||t.description=="")u.error="Fill in all fields";else{const n=await b.from("disease").insert([{name:t.name,description:t.description}]).select();n.error==null?n.data.forEach(o=>{r.value=!1,I.push("/disease/show/"+o.id)}):console.log(error)}};return(n,o)=>(d(),v(O,{title:"Diseases",back:"/"},{default:a(()=>[s(e(k),null,{default:a(()=>[(d(!0),x(E,null,F(_.disease,(l,g)=>(d(),v(e(i),{key:g,lines:"full",details:"true",button:"",onClick:W=>e(I).push("/disease/show/"+l.id)},{default:a(()=>[s(e(N),null,{default:a(()=>[p("h3",null,m(l.name),1),p("p",null,m(l.description),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),s(e(T),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:a(()=>[s(e(D),{color:"dark",onClick:o[0]||(o[0]=l=>r.value=!0)},{default:a(()=>[s(e(M),{icon:e(S)},null,8,["icon"])]),_:1})]),_:1}),s(e($),{"is-open":r.value},{default:a(()=>[s(e(z),null,{default:a(()=>[s(e(L),null,{default:a(()=>[s(e(R),null,{default:a(()=>o[4]||(o[4]=[c("Add disease details")])),_:1,__:[4]}),s(e(U),{slot:"end"},{default:a(()=>[s(e(y),{onClick:o[1]||(o[1]=l=>r.value=!1)},{default:a(()=>o[5]||(o[5]=[c("Close")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1}),s(e(h),{class:"ion-padding"},{default:a(()=>[p("form",{onSubmit:A(V,["prevent"])},[u.error!=null?(d(),x("div",P,m(u.error),1)):G("",!0),s(e(k),{style:{border:"solid thin #e5e8e8","border-radius":"10px",padding:"10px"}},{default:a(()=>[s(e(i),null,{default:a(()=>[s(e(H),{placeholder:"Enter disease",modelValue:t.name,"onUpdate:modelValue":o[2]||(o[2]=l=>t.name=l)},null,8,["modelValue"])]),_:1}),s(e(i),null,{default:a(()=>[s(e(J),{placeholder:"Enter disease description",modelValue:t.description,"onUpdate:modelValue":o[3]||(o[3]=l=>t.description=l)},null,8,["modelValue"])]),_:1}),s(e(i),{lines:"none"},{default:a(()=>[s(e(y),{expand:"block",style:{width:"100%","margin-top":"20px"},class:"ion-button",size:"default",type:"submit"},{default:a(()=>o[6]||(o[6]=[c("Save")])),_:1,__:[6]})]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["is-open"])]),_:1}))}};export{j as default};
