import{E as c,Q as F,Y as N,P as x,_ as T,a4 as D,c as y,w as l,o as p,d as I,J as z,a,u as e,K as k,a5 as v,R as d,D as w,x as i,N as V,s as S,a6 as L,L as u,v as o,a7 as m,F as M,e as R,S as h,T as O,U,a8 as $,z as q,A as K,B as W,a9 as G,C as J,a1 as P,H as Q,W as X,X as B,M as Y}from"./index-BlbjE2GR.js";import{_ as j}from"./AppLayout-D8NzJsay.js";const Z={key:0,style:{"padding-bottom":"100px"}},ee={style:{"font-size":"18px","font-weight":"bold","text-transform":"capitalize"}},te={style:{"font-size":"18px","font-weight":"bold","text-transform":"capitalize"}},le={key:0,style:{padding:"10px",color:"red"}},re={__name:"AnimalShow",setup(ae){const r=c({animal:"",back:"",report:[]}),g=N();F(()=>{let s=g.path.split("/");x.from("animal").select("*,farm (name, location,tel,type,size,id)").eq("id",s[2]).then(t=>{t.error==null?(t.data.forEach(n=>{r.animal=n,r.back="/farm/show/"+n.farm.id}),x.from("animal_report").select("*").eq("animal_id",r.animal.id).then(n=>{n.error==null?r.report=n.data:console.log(n.error)}).catch(n=>{console.log(n)})):console.log(t.error)}).catch(t=>{console.log(t)})}),T(s=>{let t=s.split("-");return t[0]+"-"+t[1]+"-"+t[2]});const C=D(!1),b=s=>{C.value=s},f=c({report:"",description:""}),_=c({error:null}),H=s=>{let t="";return s==="animal temperature"?t="Degrees":s==="heartbeat"?t="Hbps":s==="environmental temperature"&&(t="Degrees"),t},A=()=>{let s=g.path.split("/");_.error=null,f.report==""||f.description==""?_.error="Fill in all fields":x.from("animal_report").insert([{animal_id:s[2],type:f.report,description:f.description,status:"active"}]).select().then(t=>{t.error==null?(b(!1),f.description="",f.report="",t.data.forEach(n=>{r.report.push(n)})):console.log(t.error)}).catch(t=>{console.log(t)})};return(s,t)=>(p(),y(j,{title:"Animal details",back:r.back},{default:l(()=>[r.animal!=""?(p(),I("div",Z,[a(e(k),null,{default:l(()=>[a(e(v),{color:"light"},{default:l(()=>[a(e(d),null,{default:l(()=>[w("h4",ee,i(r.animal.name),1)]),_:1}),a(e(V),{color:"dark"},{default:l(()=>[a(e(S),{"aria-hidden":"true",icon:e(L)},null,8,["icon"])]),_:1})]),_:1}),a(e(u),{lines:"none"},{default:l(()=>[a(e(d),null,{default:l(()=>t[4]||(t[4]=[o("Gender")])),_:1,__:[4]}),a(e(m),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[o(i(r.animal.gender),1)]),_:1})]),_:1}),a(e(u),{lines:"none"},{default:l(()=>[a(e(d),null,{default:l(()=>t[5]||(t[5]=[o("Tag")])),_:1,__:[5]}),a(e(m),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[o(i(r.animal.tag),1)]),_:1})]),_:1}),a(e(u),{lines:"none"},{default:l(()=>[a(e(d),null,{default:l(()=>t[6]||(t[6]=[o("Color")])),_:1,__:[6]}),a(e(m),{color:"medium",style:{"font-size":"17px"}},{default:l(()=>[o(i(r.animal.color),1)]),_:1})]),_:1}),a(e(u),{lines:"none"},{default:l(()=>[a(e(d),null,{default:l(()=>t[7]||(t[7]=[o("Weight")])),_:1,__:[7]}),a(e(m),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[o(i(r.animal.weight)+" Kgs ",1)]),_:1})]),_:1}),a(e(u),{lines:"none"},{default:l(()=>[a(e(d),null,{default:l(()=>t[8]||(t[8]=[o("Origin")])),_:1,__:[8]}),a(e(m),{color:"medium",style:{"text-transform":"capitalize","font-size":"15px"}},{default:l(()=>[o(i(r.animal.origin),1)]),_:1})]),_:1}),a(e(u),{lines:"none"},{default:l(()=>[a(e(d),null,{default:l(()=>t[9]||(t[9]=[o("Farm")])),_:1,__:[9]}),a(e(m),{color:"medium",style:{"text-transform":"capitalize","font-size":"15px"}},{default:l(()=>[o(i(r.animal.farm.name),1)]),_:1})]),_:1}),a(e(u),{lines:"none"},{default:l(()=>[a(e(d),null,{default:l(()=>t[10]||(t[10]=[o("Date added")])),_:1,__:[10]}),a(e(m),{color:"medium",style:{"text-transform":"capitalize","font-size":"10px"}},{default:l(()=>[o(i(r.animal.created_at),1)]),_:1})]),_:1}),a(e(v),{color:"light"},{default:l(()=>[a(e(d),null,{default:l(()=>t[11]||(t[11]=[o("Animal Health Report")])),_:1,__:[11]})]),_:1}),(p(!0),I(M,null,R(r.report,(n,E)=>(p(),y(e(u),{key:E},{default:l(()=>[a(e(d),{style:{"text-transform":"capitalize"}},{default:l(()=>[o(i(n.type),1)]),_:2},1024),a(e(m),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[o(i(n.description)+" "+i(H(n.type)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):z("",!0),a(e(h),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:l(()=>[a(e(O),{color:"dark",onClick:t[0]||(t[0]=n=>b(!0))},{default:l(()=>[a(e(S),{icon:e(U)},null,8,["icon"])]),_:1})]),_:1}),e(g).name=="animal details"?(p(),y(e($),{key:1,"is-open":C.value},{default:l(()=>[a(e(q),null,{default:l(()=>[a(e(K),null,{default:l(()=>[a(e(W),null,{default:l(()=>t[12]||(t[12]=[o("Add animal report")])),_:1,__:[12]}),a(e(G),{slot:"end"},{default:l(()=>[a(e(V),{onClick:t[1]||(t[1]=n=>b(!1))},{default:l(()=>t[13]||(t[13]=[o("Close")])),_:1,__:[13]})]),_:1})]),_:1})]),_:1}),a(e(J),null,{default:l(()=>[a(e(k),null,{default:l(()=>[a(e(v),{color:"light"},{default:l(()=>[a(e(d),null,{default:l(()=>[w("h4",te,[o(i(r.animal.name)+" ",1),a(e(P),{color:"dark"},{default:l(()=>[o(i(r.animal.tag),1)]),_:1})])]),_:1})]),_:1})]),_:1}),w("form",{style:{padding:"15px"},onSubmit:Q(A,["prevent"])},[a(e(k),{style:{border:"solid thin #e5e8e8","border-radius":"10px","padding-bottom":"15px"}},{default:l(()=>[_.error!=null?(p(),I("div",le,i(_.error),1)):z("",!0),a(e(u),null,{default:l(()=>[a(e(X),{label:"Report",placeholder:"Select option",modelValue:f.report,"onUpdate:modelValue":t[2]||(t[2]=n=>f.report=n)},{default:l(()=>[a(e(B),{value:"animal temperature"},{default:l(()=>t[14]||(t[14]=[o("Animal Temperature")])),_:1,__:[14]}),a(e(B),{value:"heartbeat"},{default:l(()=>t[15]||(t[15]=[o("Heartbeat")])),_:1,__:[15]}),a(e(B),{value:"environmental temperature"},{default:l(()=>t[16]||(t[16]=[o("Environmental temperature")])),_:1,__:[16]})]),_:1},8,["modelValue"])]),_:1}),a(e(u),null,{default:l(()=>[a(e(Y),{label:"Measurements",placeholder:"Enter readings",type:"number",modelValue:f.description,"onUpdate:modelValue":t[3]||(t[3]=n=>f.description=n)},null,8,["modelValue"])]),_:1}),a(e(u),{lines:"none"},{default:l(()=>[a(e(V),{expand:"block",style:{width:"100%","margin-top":"20px"},class:"ion-button",size:"default",type:"submit"},{default:l(()=>t[17]||(t[17]=[o("Save")])),_:1,__:[17]})]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["is-open"])):z("",!0)]),_:1},8,["back"]))}};export{re as default};
