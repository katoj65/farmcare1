import{_ as v}from"./AppLayout-B2wXAP7u.js";import{y as f,c as i,w as t,C as y,o as u,a as s,Q as b,u as e,Y as x,E as _,d as V,F as N,e as B,G as p,D as d,U as C,J as g,x as m,Z as h,v as c,s as S,_ as L,B as D}from"./index-CZexCX0A.js";const E={class:"metadata-end-wrapper",slot:"end"},G={__name:"Search",setup(F){const r=f({search:""}),o=f({search:[],status:null}),k=y(),w=async()=>{if(o.status=null,r.search.length>1){const n=await D.from("animal").select("*,farm(name)").ilike("name","%"+r.search+"%");n.error==null?(o.search=n.data,o.status=n.data.length):console.log(n.error)}};return(n,a)=>(u(),i(v,{title:"Search",back:"/"},{default:t(()=>[s(e(x),{modelValue:r.search,"onUpdate:modelValue":a[0]||(a[0]=l=>r.search=l),onKeydown:w},null,8,["modelValue"]),o.status>0?(u(),i(e(_),{key:0},{default:t(()=>[(u(!0),V(N,null,B(o.search,(l,I)=>(u(),i(e(p),{button:!0,detail:"false",key:I,lines:"full",onClick:U=>e(k).push("/animal/"+l.id)},{default:t(()=>[s(e(C),{slot:"start"},{default:t(()=>a[1]||(a[1]=[d("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)])),_:1,__:[1]}),a[3]||(a[3]=d("div",{class:"unread-indicator-wrapper",slot:"start"},null,-1)),s(e(g),null,{default:t(()=>[d("strong",null,m(l.name),1),a[2]||(a[2]=d("br",null,null,-1)),s(e(h),{color:"medium",class:"ion-text-wrap"},{default:t(()=>[c(m(l.color)+" . "+m(l.farm.name),1)]),_:2},1024)]),_:2,__:[2]},1024),d("div",E,[s(e(S),{color:"medium",icon:e(L)},null,8,["icon"]),s(e(h),{color:"medium",style:{"padding-left":"5px"}},{default:t(()=>[c(m(l.tag),1)]),_:2},1024)])]),_:2,__:[3]},1032,["onClick"]))),128))]),_:1})):r.search!=""&&o.status==0?(u(),i(e(_),{key:1},{default:t(()=>[s(e(p),null,{default:t(()=>[s(e(g),null,{default:t(()=>a[4]||(a[4]=[c(" No results found ")])),_:1,__:[4]})]),_:1})]),_:1})):b("",!0)]),_:1}))}};export{G as default};
