System.register(["./index-legacy-D5NnZ47J.js","./AppLayout-legacy-4iQmMzwj.js"],function(e,t){"use strict";var l,a,o,n,r,i,d,s,u,m,p,c,f,_,h,g,y,x,v,b,z,k,w,A,S,V,C,E,R,D,M,j,F,H,P,U,q,B,G,K,L,T;return{setters:[e=>{l=e.y,a=e.z,o=e.A,n=e.B,r=e.a2,i=e.a4,d=e.c,s=e.w,u=e.C,m=e.o,p=e.d,c=e.Q,f=e.a,_=e.u,h=e.E,g=e.G,y=e.U,x=e.D,v=e.J,b=e.v,z=e.x,k=e.Z,w=e.a1,A=e.S,S=e.F,V=e.e,C=e.V,E=e.W,R=e.s,D=e.X,M=e.a5,j=e.K,F=e.L,H=e.M,P=e.a6,U=e.N,q=e.a7,B=e.P,G=e.$,K=e.a0,L=e.R},e=>{T=e._}],execute:function(){const t={key:0,style:{"padding-bottom":"100px"}},W={style:{"text-transform":"capitalize"}},I={class:"metadata-end-wrapper",slot:"end"},J={style:{"font-size":"25px","text-transform":"capitalize"}},N={class:"metadata-end-wrapper",slot:"end"},O={key:0,style:{padding:"10px",color:"red"}};e("default",{__name:"AnimalShow",setup(e){const Q=l({animal:"",back:"",report:[]}),X=u(),Z=o();a(()=>{let e=Z.path.split("/");n.from("animal").select("*,farm (name, location,tel,type,size,id)").eq("id",e[2]).then(e=>{null==e.error?(e.data.forEach(e=>{Q.animal=e,Q.back="/farm/show/"+e.farm.id}),n.from("animal_report").select("type,description").eq("animal_id",Q.animal.id).limit(3).then(e=>{null==e.error?Q.report=e.data:console.log(e.error)}).catch(e=>{console.log(e)})):console.log(e.error)}).catch(e=>{console.log(e)})}),r(e=>{let t=e.split("-");return t[0]+"-"+t[1]+"-"+t[2]});const $=i(!1),Y=e=>{$.value=e},ee=l({report:"",description:""}),te=l({error:null}),le=e=>{let t="";return"animal temperature"===e?t="Degrees":"heartbeat"===e?t="BPM":"environmental temperature"===e&&(t="Degrees"),t},ae=()=>{let e=Z.path.split("/");te.error=null,""==ee.report||""==ee.description?te.error="Fill in all fields":n.from("animal_report").insert([{animal_id:e[2],type:ee.report,description:ee.description,status:"active"}]).select().then(e=>{null==e.error?(Y(!1),ee.description="",ee.report="",e.data.forEach(e=>{Q.report.push(e)})):console.log(e.error)}).catch(e=>{console.log(e)})},oe=(e,t)=>{let l=[];return"animal temperature"==e?t>35&&t<40?l.push({action:"Animal temperature normal."}):t>40?(l.push({action:"Antibiotics."}),l.push({action:"Isolate the animal."})):l.push({action:"Move to animal to shade."}):"heartbeat"==e?t>=48&&t<=84?l.push({action:"Heartbeat is normal."}):t>84?l.push({action:"Refer to the veterinary doctor for heartbeat."}):l.push({action:"Refer to the veterinary doctor."}):"environmental temperature"==e&&(t>=20&&t<=35?l.push({action:"Environment temperature is normal."}):t>35&&(l.push({action:"Provide shade, clean water."}),l.push({action:"Adjust dietary needs."}))),l};return(e,l)=>(m(),d(T,{title:"Animal details",back:Q.back},{default:s(()=>[""!=Q.animal?(m(),p("div",t,[f(_(h),null,{default:s(()=>[f(_(g),{lines:"none",color:"light"},{default:s(()=>[f(_(y),null,{default:s(()=>l[5]||(l[5]=[x("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)])),_:1,__:[5]}),f(_(v),{style:{"font-size":"18px","font-weight":"bold","text-transform":"capitalize","margin-left":"10px"}},{default:s(()=>[b(z(Q.animal.name),1)]),_:1}),f(_(k),{color:"medium",style:{"font-size":"15px"}})]),_:1}),f(_(g),{lines:"none"},{default:s(()=>[f(_(v),null,{default:s(()=>l[6]||(l[6]=[b("Gender")])),_:1,__:[6]}),f(_(k),{color:"medium",style:{"font-size":"15px"}},{default:s(()=>[b(z(Q.animal.gender),1)]),_:1})]),_:1}),f(_(g),{lines:"none"},{default:s(()=>[f(_(v),null,{default:s(()=>l[7]||(l[7]=[b("Tag")])),_:1,__:[7]}),f(_(k),{color:"medium",style:{"font-size":"15px"}},{default:s(()=>[b(z(Q.animal.tag),1)]),_:1})]),_:1}),f(_(g),{lines:"none"},{default:s(()=>[f(_(v),null,{default:s(()=>l[8]||(l[8]=[b("Color")])),_:1,__:[8]}),f(_(k),{color:"medium",style:{"font-size":"17px"}},{default:s(()=>[b(z(Q.animal.color),1)]),_:1})]),_:1}),f(_(g),{lines:"none"},{default:s(()=>[f(_(v),null,{default:s(()=>l[9]||(l[9]=[b("Weight")])),_:1,__:[9]}),f(_(k),{color:"medium",style:{"font-size":"15px"}},{default:s(()=>[b(z(Q.animal.weight)+" Kgs ",1)]),_:1})]),_:1}),f(_(g),{lines:"none"},{default:s(()=>[f(_(v),null,{default:s(()=>l[10]||(l[10]=[b("Origin")])),_:1,__:[10]}),f(_(k),{color:"medium",style:{"text-transform":"capitalize","font-size":"15px"}},{default:s(()=>[b(z(Q.animal.origin),1)]),_:1})]),_:1}),f(_(g),{lines:"none"},{default:s(()=>[f(_(v),null,{default:s(()=>l[11]||(l[11]=[b("Farm")])),_:1,__:[11]}),f(_(k),{color:"medium",style:{"text-transform":"capitalize","font-size":"15px"}},{default:s(()=>[b(z(Q.animal.farm.name),1)]),_:1})]),_:1}),f(_(g),{lines:"none"},{default:s(()=>[f(_(v),null,{default:s(()=>l[12]||(l[12]=[b("Date added")])),_:1,__:[12]}),f(_(k),{color:"medium",style:{"text-transform":"capitalize","font-size":"10px"}},{default:s(()=>[b(z(Q.animal.created_at),1)]),_:1})]),_:1}),f(_(w),{color:"light"},{default:s(()=>[f(_(v),{style:{"font-weight":"bold"}},{default:s(()=>l[13]||(l[13]=[b(" Animal Health Report ")])),_:1,__:[13]}),Q.report.length>0?(m(),d(_(A),{key:0,color:"dark",onClick:l[0]||(l[0]=e=>_(X).push("/share/"+Q.animal.id))},{default:s(()=>l[14]||(l[14]=[x("span",{class:"material-icons"},"share",-1)])),_:1,__:[14]})):c("",!0)]),_:1}),(m(!0),p(S,null,V(Q.report,(e,t)=>(m(),d(_(g),{key:t,color:"light",style:{"margin-top":"3px"},lines:"none"},{default:s(()=>[f(_(v),null,{default:s(()=>[x("strong",W,z(e.type),1),f(_(k),{color:"medium",class:"ion-text-wrap"},{default:s(()=>[(m(!0),p(S,null,V(oe(e.type,e.description),(e,t)=>(m(),p("p",{key:t,style:{"padding-top":"10px"}},z(e.action),1))),128))]),_:2},1024)]),_:2},1024),x("div",I,[f(_(k),{color:"medium",style:{"font-size":"15px"}},{default:s(()=>[b(z(e.description)+" "+z(le(e.type)),1)]),_:2},1024)])]),_:2},1024))),128))]),_:1})])):c("",!0),f(_(C),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:s(()=>[f(_(E),{color:"dark",onClick:l[1]||(l[1]=e=>Y(!0))},{default:s(()=>[f(_(R),{icon:_(D)},null,8,["icon"])]),_:1})]),_:1}),"animal details"==_(Z).name?(m(),d(_(M),{key:1,"is-open":$.value},{default:s(()=>[f(_(j),null,{default:s(()=>[f(_(F),null,{default:s(()=>[f(_(H),null,{default:s(()=>l[15]||(l[15]=[b("Add animal report")])),_:1,__:[15]}),f(_(P),{slot:"end"},{default:s(()=>[f(_(A),{onClick:l[2]||(l[2]=e=>Y(!1))},{default:s(()=>l[16]||(l[16]=[b("Close")])),_:1,__:[16]})]),_:1})]),_:1})]),_:1}),f(_(U),null,{default:s(()=>[f(_(h),null,{default:s(()=>[f(_(g),{detail:"false",color:"light",lines:"none"},{default:s(()=>[l[18]||(l[18]=x("div",{class:"unread-indicator-wrapper",slot:"start"},null,-1)),f(_(y),{slot:"start"},{default:s(()=>l[17]||(l[17]=[x("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)])),_:1,__:[17]}),f(_(v),null,{default:s(()=>[x("strong",J,z(Q.animal.name),1)]),_:1}),x("div",N,[f(_(R),{color:"medium",icon:_(q)},null,8,["icon"]),f(_(k),{color:"medium"},{default:s(()=>[b(z(Q.animal.tag),1)]),_:1})])]),_:1,__:[18]})]),_:1}),x("form",{style:{padding:"15px"},onSubmit:B(ae,["prevent"])},[f(_(h),{style:{border:"solid thin #e5e8e8","border-radius":"10px","padding-bottom":"15px"}},{default:s(()=>[null!=te.error?(m(),p("div",O,z(te.error),1)):c("",!0),f(_(g),null,{default:s(()=>[f(_(G),{label:"Report",placeholder:"Select option",modelValue:ee.report,"onUpdate:modelValue":l[3]||(l[3]=e=>ee.report=e)},{default:s(()=>[f(_(K),{value:"animal temperature"},{default:s(()=>l[19]||(l[19]=[b("Animal Temperature")])),_:1,__:[19]}),f(_(K),{value:"heartbeat"},{default:s(()=>l[20]||(l[20]=[b("Heartbeat")])),_:1,__:[20]}),f(_(K),{value:"environmental temperature"},{default:s(()=>l[21]||(l[21]=[b("Environmental temperature")])),_:1,__:[21]})]),_:1},8,["modelValue"])]),_:1}),f(_(g),null,{default:s(()=>[f(_(L),{label:"Measurements",placeholder:"Enter readings",type:"number",modelValue:ee.description,"onUpdate:modelValue":l[4]||(l[4]=e=>ee.description=e)},null,8,["modelValue"])]),_:1}),f(_(g),{lines:"none"},{default:s(()=>[f(_(A),{expand:"block",style:{width:"100%","margin-top":"20px"},class:"ion-button",size:"default",type:"submit"},{default:s(()=>l[22]||(l[22]=[b("Save")])),_:1,__:[22]})]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["is-open"])):c("",!0)]),_:1},8,["back"]))}})}}});
