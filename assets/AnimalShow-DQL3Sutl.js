import{y as I,z as L,A as T,B as k,a2 as $,a4 as O,c as y,w as l,C as P,o as p,d as g,Q as x,a,u as t,E as z,G as d,U as V,D as _,J as u,v as n,x as s,Z as m,a1 as U,S as h,F as A,e as B,V as q,W as G,s as C,X as K,a5 as W,K as j,L as J,M as Q,a6 as X,N as Z,a7 as Y,P as ee,$ as te,a0 as w,R as le}from"./index-Bi8Js04o.js";import{_ as ae}from"./AppLayout-Cg3WU7QW.js";const oe={key:0,style:{"padding-bottom":"100px"}},ne={style:{"text-transform":"capitalize"}},re={class:"metadata-end-wrapper",slot:"end"},ie={style:{"font-size":"25px","text-transform":"capitalize"}},se={class:"metadata-end-wrapper",slot:"end"},de={key:0,style:{padding:"10px",color:"red"}},pe={__name:"AnimalShow",setup(ue){const r=I({animal:"",back:"",report:[]}),E=P(),v=T();L(()=>{let i=v.path.split("/");k.from("animal").select("*,farm (name, location,tel,type,size,id)").eq("id",i[2]).then(e=>{e.error==null?(e.data.forEach(o=>{r.animal=o,r.back="/farm/show/"+o.farm.id}),k.from("animal_report").select("type,description").eq("animal_id",r.animal.id).limit(3).then(o=>{o.error==null?r.report=o.data:console.log(o.error)}).catch(o=>{console.log(o)})):console.log(e.error)}).catch(e=>{console.log(e)})}),$(i=>{let e=i.split("-");return e[0]+"-"+e[1]+"-"+e[2]});const S=O(!1),b=i=>{S.value=i},f=I({report:"",description:""}),c=I({error:null}),M=i=>{let e="";return i==="animal temperature"?e="Degrees":i==="heartbeat"?e="BPM":i==="environmental temperature"&&(e="Degrees"),e},R=()=>{let i=v.path.split("/");c.error=null,f.report==""||f.description==""?c.error="Fill in all fields":k.from("animal_report").insert([{animal_id:i[2],type:f.report,description:f.description,status:"active"}]).select().then(e=>{e.error==null?(b(!1),f.description="",f.report="",e.data.forEach(o=>{r.report.push(o)})):console.log(e.error)}).catch(e=>{console.log(e)})},F=(i,e)=>{let o=[];return i=="animal temperature"?e>35&&e<40?o.push({action:"Animal temperature normal."}):e>40?(o.push({action:"Antibiotics."}),o.push({action:"Isolate the animal."})):o.push({action:"Move to animal to shade."}):i=="heartbeat"?e>=48&&e<=84?o.push({action:"Heartbeat is normal."}):e>84?o.push({action:"Refer to the veterinary doctor for heartbeat."}):o.push({action:"Refer to the veterinary doctor."}):i=="environmental temperature"&&(e>=20&&e<=35?o.push({action:"Environment temperature is normal."}):e>35&&(o.push({action:"Provide shade, clean water."}),o.push({action:"Adjust dietary needs."}))),o};return(i,e)=>(p(),y(ae,{title:"Animal details",back:r.back},{default:l(()=>[r.animal!=""?(p(),g("div",oe,[a(t(z),null,{default:l(()=>[a(t(d),{lines:"none",color:"light"},{default:l(()=>[a(t(V),null,{default:l(()=>e[5]||(e[5]=[_("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)])),_:1,__:[5]}),a(t(u),{style:{"font-size":"18px","font-weight":"bold","text-transform":"capitalize","margin-left":"10px"}},{default:l(()=>[n(s(r.animal.name),1)]),_:1}),a(t(m),{color:"medium",style:{"font-size":"15px"}})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[6]||(e[6]=[n("Gender")])),_:1,__:[6]}),a(t(m),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[n(s(r.animal.gender),1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[7]||(e[7]=[n("Tag")])),_:1,__:[7]}),a(t(m),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[n(s(r.animal.tag),1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[8]||(e[8]=[n("Color")])),_:1,__:[8]}),a(t(m),{color:"medium",style:{"font-size":"17px"}},{default:l(()=>[n(s(r.animal.color),1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[9]||(e[9]=[n("Weight")])),_:1,__:[9]}),a(t(m),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[n(s(r.animal.weight)+" Kgs ",1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[10]||(e[10]=[n("Origin")])),_:1,__:[10]}),a(t(m),{color:"medium",style:{"text-transform":"capitalize","font-size":"15px"}},{default:l(()=>[n(s(r.animal.origin),1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[11]||(e[11]=[n("Farm")])),_:1,__:[11]}),a(t(m),{color:"medium",style:{"text-transform":"capitalize","font-size":"15px"}},{default:l(()=>[n(s(r.animal.farm.name),1)]),_:1})]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>e[12]||(e[12]=[n("Date added")])),_:1,__:[12]}),a(t(m),{color:"medium",style:{"text-transform":"capitalize","font-size":"10px"}},{default:l(()=>[n(s(r.animal.created_at),1)]),_:1})]),_:1}),a(t(U),{color:"light"},{default:l(()=>[a(t(u),{style:{"font-weight":"bold"}},{default:l(()=>e[13]||(e[13]=[n(" Animal Health Report ")])),_:1,__:[13]}),r.report.length>0?(p(),y(t(h),{key:0,color:"dark",onClick:e[0]||(e[0]=o=>t(E).push("/share/"+r.animal.id))},{default:l(()=>e[14]||(e[14]=[_("span",{class:"material-icons"},"share",-1)])),_:1,__:[14]})):x("",!0)]),_:1}),(p(!0),g(A,null,B(r.report,(o,N)=>(p(),y(t(d),{key:N,color:"light",style:{"margin-top":"3px"},lines:"none"},{default:l(()=>[a(t(u),null,{default:l(()=>[_("strong",ne,s(o.type),1),a(t(m),{color:"medium",class:"ion-text-wrap"},{default:l(()=>[(p(!0),g(A,null,B(F(o.type,o.description),(D,H)=>(p(),g("p",{key:H,style:{"padding-top":"10px"}},s(D.action),1))),128))]),_:2},1024)]),_:2},1024),_("div",re,[a(t(m),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[n(s(o.description)+" "+s(M(o.type)),1)]),_:2},1024)])]),_:2},1024))),128))]),_:1})])):x("",!0),a(t(q),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:l(()=>[a(t(G),{color:"dark",onClick:e[1]||(e[1]=o=>b(!0))},{default:l(()=>[a(t(C),{icon:t(K)},null,8,["icon"])]),_:1})]),_:1}),t(v).name=="animal details"?(p(),y(t(W),{key:1,"is-open":S.value},{default:l(()=>[a(t(j),null,{default:l(()=>[a(t(J),null,{default:l(()=>[a(t(Q),null,{default:l(()=>e[15]||(e[15]=[n("Add animal report")])),_:1,__:[15]}),a(t(X),{slot:"end"},{default:l(()=>[a(t(h),{onClick:e[2]||(e[2]=o=>b(!1))},{default:l(()=>e[16]||(e[16]=[n("Close")])),_:1,__:[16]})]),_:1})]),_:1})]),_:1}),a(t(Z),null,{default:l(()=>[a(t(z),null,{default:l(()=>[a(t(d),{detail:"false",color:"light",lines:"none"},{default:l(()=>[e[18]||(e[18]=_("div",{class:"unread-indicator-wrapper",slot:"start"},null,-1)),a(t(V),{slot:"start"},{default:l(()=>e[17]||(e[17]=[_("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)])),_:1,__:[17]}),a(t(u),null,{default:l(()=>[_("strong",ie,s(r.animal.name),1)]),_:1}),_("div",se,[a(t(C),{color:"medium",icon:t(Y)},null,8,["icon"]),a(t(m),{color:"medium"},{default:l(()=>[n(s(r.animal.tag),1)]),_:1})])]),_:1,__:[18]})]),_:1}),_("form",{style:{padding:"15px"},onSubmit:ee(R,["prevent"])},[a(t(z),{style:{border:"solid thin #e5e8e8","border-radius":"10px","padding-bottom":"15px"}},{default:l(()=>[c.error!=null?(p(),g("div",de,s(c.error),1)):x("",!0),a(t(d),null,{default:l(()=>[a(t(te),{label:"Report",placeholder:"Select option",modelValue:f.report,"onUpdate:modelValue":e[3]||(e[3]=o=>f.report=o)},{default:l(()=>[a(t(w),{value:"animal temperature"},{default:l(()=>e[19]||(e[19]=[n("Animal Temperature")])),_:1,__:[19]}),a(t(w),{value:"heartbeat"},{default:l(()=>e[20]||(e[20]=[n("Heartbeat")])),_:1,__:[20]}),a(t(w),{value:"environmental temperature"},{default:l(()=>e[21]||(e[21]=[n("Environmental temperature")])),_:1,__:[21]})]),_:1},8,["modelValue"])]),_:1}),a(t(d),null,{default:l(()=>[a(t(le),{label:"Measurements",placeholder:"Enter readings",type:"number",modelValue:f.description,"onUpdate:modelValue":e[4]||(e[4]=o=>f.description=o)},null,8,["modelValue"])]),_:1}),a(t(d),{lines:"none"},{default:l(()=>[a(t(h),{expand:"block",style:{width:"100%","margin-top":"20px"},class:"ion-button",size:"default",type:"submit"},{default:l(()=>e[22]||(e[22]=[n("Save")])),_:1,__:[22]})]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["is-open"])):x("",!0)]),_:1},8,["back"]))}};export{pe as default};
