import{_ as I}from"./AppLayout-BAfyyrjr.js";import{y as _,z as S,A as z,B as c,c as p,w as l,C as B,o as u,d as g,Q as C,a as r,u as a,E as N,G as h,D as i,U as k,J as w,x as n,Z as f,v as m,s as b,a7 as R,F as V,e as q,af as A}from"./index-pbNnSScs.js";const D={key:0,style:{"padding-bottom":"100px"}},E={style:{"font-size":"20px","font-weight":"bold","text-transform":"capitalize"}},L={class:"metadata-end-wrapper",slot:"end"},F={class:"metadata-end-wrapper",slot:"end"},K={__name:"ShareAnimalReport",setup($){const o=_({animal:"",back:"",workers:[]}),x=B(),v=z();S(()=>{let d=v.path.split("/");c.from("animal").select("*,farm(name, location,tel,type,size,id)").eq("id",d[2]).then(e=>{e.error==null?e.data.forEach(t=>{o.animal=t,o.back="/farm/show/"+t.farm.id,c.from("worker").select("*").eq("farm_id",t.farm.id).then(s=>{s.error==null?o.workers=s.data:console.log(s.error)}).catch(s=>{console.log(s)})}):console.log(e.error)}).catch(e=>{console.log(e)})}),_({report:"",description:""}),_({error:null});const y=async d=>{const e=o.animal.id,t=await c.from("animal_report").select("*").eq("animal_id",e),s={...t.data};t.error==null?(await c.from("message").insert([{animal_id:e,worker_id:d.id,message:s}]).select(),x.push("/animal/"+e)):console.log(t.error)};return(d,e)=>(u(),p(I,{title:"Share Report",back:o.back},{default:l(()=>[o.animal!=""?(u(),g("div",D,[r(a(N),null,{default:l(()=>[r(a(h),{lines:"none",color:"light"},{default:l(()=>[r(a(k),{slot:"start"},{default:l(()=>e[0]||(e[0]=[i("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)])),_:1,__:[0]}),r(a(w),null,{default:l(()=>[i("strong",E,n(o.animal.name),1),e[1]||(e[1]=i("br",null,null,-1)),r(a(f),{color:"medium",class:"ion-text-wrap"},{default:l(()=>[m(n(o.animal.gender)+" . "+n(o.animal.color)+" . "+n(o.animal.weight)+" Kgs ",1)]),_:1})]),_:1,__:[1]}),i("div",L,[r(a(f),{color:"medium",style:{"font-size":"15px"}},{default:l(()=>[r(a(b),{icon:a(R)},null,8,["icon"]),m(" "+n(o.animal.tag),1)]),_:1})])]),_:1}),(u(!0),g(V,null,q(o.workers,(t,s)=>(u(),p(a(h),{button:!0,detail:"false",key:s,lines:"none",style:{border:"solid thin #e5e8e8","margin-top":"5px",margin:"5px"},onClick:j=>y(t)},{default:l(()=>[r(a(k),{slot:"start"},{default:l(()=>e[2]||(e[2]=[i("img",{alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)])),_:1,__:[2]}),r(a(w),null,{default:l(()=>[i("strong",null,[m(n(t.firstname)+" "+n(t.lastname),1),e[3]||(e[3]=i("br",null,null,-1))]),r(a(f),{color:"medium",class:"ion-text-wrap"},{default:l(()=>[m(n(t.role)+" . 0"+n(t.tel),1)]),_:2},1024)]),_:2},1024),i("div",F,[r(a(b),{color:"medium",icon:a(A)},null,8,["icon"]),r(a(f),{color:"medium"},{default:l(()=>e[4]||(e[4]=[m(" Share")])),_:1,__:[4]})])]),_:2},1032,["onClick"]))),128))]),_:1})])):C("",!0)]),_:1},8,["back"]))}};export{K as default};
